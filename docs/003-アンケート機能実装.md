# 003 - アンケート機能実装

## 概要
文字入力不要の選択式アンケート機能を実装します。

## 目的
- ユーザーの症状を段階的に収集
- シニア層でも使いやすいUI
- 回答データの状態管理

## タスク

### Context/State管理
- [x] QuestionnaireContext の作成
- [x] 回答データの型定義（TypeScript）
- [x] 状態管理ロジックの実装

### アンケートコンポーネント
- [x] QuestionnaireForm コンポーネント作成
- [x] QuestionOption コンポーネント作成（選択肢）
- [x] 各質問項目の実装
  - [x] Q1: どこが気になりますか？（単一選択）
  - [x] Q2: いつからですか？（単一選択）
  - [x] Q3: どんな状態ですか？（複数選択）
  - [x] Q4: 大きさ（条件付き表示）
  - [x] Q5: 持病（複数選択）
  - [x] Q6: 薬（単一選択）
  - [x] Q7: 自由メモ（テキスト入力）

### 条件分岐ロジック
- [x] 「しこり・ふくらみ」選択時に「大きさ」質問を表示
- [x] 未回答項目のバリデーション

### UI/UX
- [x] 選択状態の視覚的フィードバック
- [ ] 進行状況の表示（オプション）※実装スキップ
- [x] 「まとめる」ボタンの実装

### ルーティング
- [x] /questionnaire ページの作成
- [x] /questionnaire から /results への遷移

## データ型定義

```typescript
// src/types/questionnaire.ts
export interface QuestionnaireData {
  location: string | null;              // のど, むね, etc.
  duration: string | null;              // 今日, 2-3日前, etc.
  symptoms: string[];                   // 痛い, しこり, etc.
  lumpSize?: string | null;             // 条件付き: 小さい, 1cm, etc.
  conditions: string[];                 // なし, 血圧・心臓, etc.
  medicine: string | null;              // のんでいる, のんでいない, etc.
  memo: string;                         // 自由記述
}
```

## 受け入れ基準
- [x] 全ての質問項目が表示される
- [x] 単一選択・複数選択が正しく動作する
- [x] 条件分岐が正しく機能する
- [x] 必須項目の未入力時にエラー表示される
- [x] 回答データが正しく保持される
- [x] 「まとめる」ボタンで結果ページに遷移する

## 依存関係
- 002-基本UI構築

## 関連ファイル
- `/home/masayuki/NextJs/byouin-nabi/src/app/questionnaire/page.tsx`
- `/home/masayuki/NextJs/byouin-nabi/src/components/Questionnaire/`
- `/home/masayuki/NextJs/byouin-nabi/src/context/QuestionnaireContext.tsx`
- `/home/masayuki/NextJs/byouin-nabi/src/types/questionnaire.ts`

## 備考
- 1画面完結型（スクロールのみ）
- 質問は全て日本語のひらがな・カタカナ中心
- 選択肢のテキストは大きく、タップ領域も十分に確保
